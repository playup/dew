<VirtualHost *:80>
    ServerAdmin admin@playup.com

    <% if server_name %>
      ServerName <%= server_name %>
      PassengerPreStart http://<%= server_name %>/status
    <% else %>
      PassengerPreStart http://localhost/status
    <% end %>
    
    PassEnv DB_HOST DB_NAME DB_USERNAME DB_PASSWORD

    PassengerFriendlyErrorPages off
    PassengerMaxRequests 50

    RailsEnv <%= rails_env %>

    DocumentRoot <%= working_directory %>/public
    <Directory <%= working_directory %>/public>
        allow from all
        Options -MultiViews
        AllowOverride None
        Order allow,deny
    </Directory>

    ErrorLog /var/log/apache2/<%= application_name %>-error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog /var/log/apache2/<%= application_name %>-access.log combined

</VirtualHost>
